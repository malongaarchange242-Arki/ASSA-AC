:root {
    --primary-blue: #1A73E8;
    --dark-blue: #0B3F7B;
    --light-bg: #F5F7FA;
    --text-color: #3C4043;
    --border-color: #DADCE0;
    --sidebar-width: 250px;
    --alert-red: #D93025;
    --nav-text-default: #E0E0E0;
}

/* Global Styles */
body {
    font-family: 'Arial', sans-serif;
    margin:0; padding:0;
    background-color: var(--light-bg);
    display:flex;
    min-height:100vh;
    color: var(--text-color);
}

.sidebar {
    width: var(--sidebar-width);
    background-color: var(--dark-blue);
    color: white;
    padding: 20px 0;
    display: flex;
    flex-direction: column;
    box-shadow: 2px 0 5px rgba(0,0,0,0.1);
    position: fixed;
    top:0;
    left:0;
    height: 100vh;
    z-index:1000;
    box-sizing:border-box;
}

.nav-menu { flex-grow:1; }
.sidebar-header { 
    text-align:center; 
    padding:0 20px 30px; 
    font-size:1.8em; 
    font-weight:bold; 
    color:white; 
    display:flex; 
    align-items:center; 
    justify-content:center; 
}
.sidebar-bottom { 
    padding:10px 0; 
    border-top:1px solid rgba(255,255,255,0.1); 
}

.nav-menu a, .sidebar-bottom a { 
    display:flex; 
    align-items:center; 
    padding:15px 20px; 
    text-decoration:none; 
    color:var(--nav-text-default); 
    transition: background-color 0.2s,color 0.2s,border-left 0.2s; 
}
.nav-menu a:hover, .sidebar-bottom a:hover { 
    background-color: rgba(255,255,255,0.1); 
    color:white; 
    border-left:4px solid var(--primary-blue); 
    padding-left:16px; 
}
.nav-menu a.active { 
    background-color: var(--primary-blue); 
    color:white; 
    font-weight:bold; 
    border-left:4px solid white; 
    padding-left:16px; 
}

/* ✅ Espacement icônes */
.nav-menu a i, .sidebar-bottom a i {
    margin-right: 12px;
    width: 20px;
    text-align: center;
}

/* Main Content */
.main-content { 
    flex-grow:1; 
    margin-left:var(--sidebar-width); 
    display:flex; 
    flex-direction:column; 
    height:100vh; 
}
.header { 
    background-color:white; 
    padding:15px 30px; 
    display:flex; 
    justify-content:flex-end; 
    align-items:center; 
    box-shadow:0 1px 4px rgba(0,0,0,0.05); 
}
.header-actions { display:flex; align-items:center; width:100%; }
.search-bar { margin-right:auto; flex-grow:1; max-width:400px; }
.search-bar input { 
    padding:10px 15px; 
    border:1px solid var(--border-color); 
    border-radius:20px; 
    width:100%; 
    outline:none; 
    background:white; 
    color:var(--text-color);
}
.user-interaction-group { display:flex; align-items:center; }
.icon-btn { background:none; border:none; color:var(--text-color); margin-left:15px; cursor:pointer; font-size:1.1em; padding:5px; transition: color 0.2s; }
.icon-btn:hover { color:var(--primary-blue); }
.user-info { display:flex; align-items:center; margin-left:25px; cursor:pointer; border-left:1px solid var(--border-color); padding-left:25px; }
.user-avatar { width:35px; height:35px; border-radius:50%; background-color:#ccc; margin-right:10px; object-fit:cover; display:flex; align-items:center; justify-content:center; font-weight:bold; color:white; }

/* Messaging Layout */
.messaging-container { display:flex; flex-grow:1; overflow:hidden; }
.conversations-list { width:350px; flex-shrink:0; background:white; border-right:1px solid var(--border-color); overflow-y:auto; padding:10px 0; }
.list-header { padding:10px 20px 15px; font-size:1.2em; font-weight:bold; color: var(--dark-blue); display:flex; justify-content:space-between; align-items:center; }
.new-message-btn { background-color:var(--primary-blue); color:white; border:none; padding:8px 12px; border-radius:4px; cursor:pointer; font-size:0.9em; transition: background-color 0.2s;}
.new-message-btn:hover { background-color:var(--dark-blue); }

/* Conversation Item */
.conversation-item { display:flex; align-items:center; padding:10px 20px; border-bottom:1px solid #F0F0F0; cursor:pointer; transition: background-color 0.2s; }
.conversation-item:hover { background-color:#F8F8F8; }
.conversation-item.active { background-color:rgba(26,115,232,0.1); }
.conv-avatar { width:45px; height:45px; border-radius:50%; object-fit:cover; background-color:#ccc; flex-shrink:0; margin-right:15px; display:flex; align-items:center; justify-content:center; font-weight:bold; color:white; }
.conv-info { flex-grow:1; }
.conv-company { font-weight:bold; color: var(--dark-blue); }

/* Chat Area */
.chat-area { flex-grow:1; display:flex; flex-direction:column; background-color:var(--light-bg); height:calc(100vh - 70px);}
.chat-header { background:white; padding:15px 20px; border-bottom:1px solid var(--border-color); display:flex; align-items:center; }
.chat-header img { width:45px; height:45px; border-radius:50%; object-fit:cover; margin-right:15px; }
.chat-header-details { flex-grow:1; }
.chat-header h2 { margin:0; font-size:1.2em; color:var(--primary-blue);}
.chat-header p { margin:0; font-size:0.85em; color:#70757A;}
.chat-messages { flex-grow:1; padding:20px; overflow-y:auto; display:flex; flex-direction:column; gap:15px;}

/* Bulles de message */
.message {
    max-width:70%;
    padding:10px 15px;
    border-radius:15px;
    line-height:1.4;
    position:relative;
    box-shadow:0 1px 2px rgba(0,0,0,0.1);
}

.message-admin {
    background: var(--primary-blue);
    color: white;
    align-self: flex-end;
    border-radius: 15px 15px 5px 15px;
}
.message-admin::after {
    content:"";
    position:absolute;
    right:-6px;
    top:10px;
    width:0;
    height:0;
    border-top:8px solid transparent;
    border-bottom:8px solid transparent;
    border-left:8px solid var(--primary-blue);
}

.message-client {
    background:white;
    color: var(--text-color);
    align-self: flex-start;
    border:1px solid #E0E0E0;
    border-radius: 15px 15px 15px 5px;
}
.message-client::after {
    content:"";
    position:absolute;
    left:-6px;
    top:10px;
    width:0;
    height:0;
    border-top:8px solid transparent;
    border-bottom:8px solid transparent;
    border-right:8px solid white;
}

/* Pièces jointes et images */
.attachment, .attachment img {
    display:flex;
    align-items:center;
    background-color:#e0f2ff;
    color:var(--dark-blue);
    padding:8px 10px;
    border-radius:8px;
    margin-top:5px;
    cursor:pointer;
    font-size:0.8em;
    border:1px solid #cce0ff;
    max-width: 200px;
}
.attachment img {
    max-width: 100%;
    border-radius: 6px;
}
.message-admin .attachment {
    background-color: rgba(255,255,255,0.2);
    color:white;
    border:1px solid rgba(255,255,255,0.4);
}

/* Chat Input */
.chat-input-area { background:white; padding:15px 20px; border-top:1px solid var(--border-color); display:flex; align-items:center; }
.chat-input-area textarea { flex-grow:1; padding:10px; border:1px solid var(--border-color); border-radius:8px; resize:none; margin-right:10px; font-family:inherit; }
.input-actions { display:flex; align-items:center; }
.input-actions button { background-color: var(--primary-blue); color:white; border:none; padding:10px 15px; border-radius:8px; cursor:pointer; margin-left:5px; transition:background-color 0.2s;}
.input-actions button:hover { background-color: var(--dark-blue); }
.input-actions .attach-btn { background:none; color:var(--text-color); font-size:1.2em; margin-right:10px; border:none; cursor:pointer; }

/* Messages temporaires / envoi / échec */
.message-temp {
    opacity: 0.6;
    filter: grayscale(30%);
    pointer-events: none;
}
.message-sending {
    opacity: 0.8;
    animation: pulse 1.2s infinite;
}
.message-failed {
    opacity: 0.8;
    border: 1px solid var(--alert-red);
}
@keyframes pulse {
    0% { transform: scale(1); opacity: 0.8; }
    50% { transform: scale(1.02); opacity: 0.5; }
    100% { transform: scale(1); opacity: 0.8; }
}

/* Preview fichiers avant envoi */
.preview-container {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    padding: 10px 20px;
    border-top: 1px solid var(--border-color);
    background: #fff;
}
.preview-item {
    position: relative;
    background: #f1f5ff;
    border: 1px solid #c9d7ff;
    padding: 8px 12px;
    border-radius: 8px;
    display: flex;
    align-items: center;
    gap: 10px;
    font-size: 0.85em;
    color: var(--dark-blue);
    max-width: 250px;
}
.preview-item i {
    font-size: 1.2em;
}
.preview-remove {
    position: absolute;
    top: -6px;
    right: -6px;
    background: var(--alert-red);
    color: #fff;
    width: 18px;
    height: 18px;
    border-radius: 50%;
    font-size: 0.75em;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
}

